let functions,admin,setClaim,removeClaim;_8db‍.x([["default",()=>_8db‍.o]]);_8db‍.w("firebase-functions",[["*",null,function(v){functions=v}]]);_8db‍.w("firebase-admin",[["default",["admin"],function(v){admin=v}]]);_8db‍.w("../../utils/customClaims",[["setClaim",["setClaim"],function(v){setClaim=v}],["removeClaim",["removeClaim"],function(v){removeClaim=v}]]);



_8db‍.d(functions
  .region('europe-west1')
  .database.ref('admins/{uid}/')
  .onWrite(async (snap, context) => {
    const value = snap.after.val()
    const uid = context.params.uid

    if (value) {
      await admin
        .firestore()
        .doc(`/admins/${uid}/`)
        .set({ isAdmin: value })
      await customClaims.setClaim(uid, 'admin')
    } else {
      await admin
        .firestore()
        .doc(`/admins/${uid}/`)
        .delete()
      await customClaims.removeClaim(uid, 'admin')
    }

    return
  }));
